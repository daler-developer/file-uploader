(this["webpackJsonpimage-gallery-v2"]=this["webpackJsonpimage-gallery-v2"]||[]).push([[0],{76:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(50),s=n(0),i=n.n(s),r=n(2),o=n(42),l=n(36),u=n(60),d=n(48),p=n(38),b=(Object(u.a)({apiKey:"AIzaSyBOUI4Nbjyrar2z6Jdjp1M7ziRuDBnbQjo",authDomain:"my-file-clone.firebaseapp.com",projectId:"my-file-clone",storageBucket:"my-file-clone.appspot.com",messagingSenderId:"873320515679",appId:"1:873320515679:web:a22244ae8a46cc9922b3ea"}),new d.a,Object(d.b)()),j=Object(l.f)(),m=Object(p.c)(),f=n(27),h=n(13),_=n(33),O=Object(_.b)({name:"auth",initialState:{currentUser:null},reducers:{login:function(e,t){var n=t.payload;e.currentUser=n},logout:function(e){e.currentUser=null}}}),x=function(e){return e.auth.currentUser},v=O.actions,g=O.reducer,N=(n(76),n(19)),y=n(15),w=n.n(y),k=Object(_.b)({name:"common",initialState:{alert:null,imageViewingUrl:null,currentVisibleModal:null},reducers:{openAlert:function(e,t){var n=t.payload;e.alert=n},closeAlert:function(e){e.alert=null},setImageViewingUrl:function(e,t){var n=t.payload;e.imageViewingUrl=n},setCurrentVisibleModal:function(e,t){var n=t.payload;e.currentVisibleModal=n}}}),C=function(e){return e.common.currentVisibleModal},S=k.actions,F=k.reducer,A=function(){return Object(f.b)()},U=f.c,P=function(){var e=Object(h.h)().search;return Object(a.useMemo)((function(){return new URLSearchParams(e)}),[e])},B=function(e,t,n){Object(a.useEffect)((function(){var a=function(a){e.current&&!e.current.contains(a.target)&&(n&&!n.every((function(e){return!0===Boolean(e)}))||t(a))};return document.addEventListener("click",a),function(){document.removeEventListener("click",a)}}),[e,t])},M=n(5),V=function(e){Object(N.a)(e);var t=Object(f.b)(),n=U((function(e){return function(e){return e.common.alert}(e)})),c=function(){return!Boolean(n)};return Object(a.useEffect)((function(){c()||setTimeout((function(){t(S.closeAlert())}),2e3)}),[c()]),Object(M.jsx)("div",{className:w()("alert",{"alert--hidden":c(),"alert--success":"success"===(null===n||void 0===n?void 0:n.type),"alert--error":"error"===(null===n||void 0===n?void 0:n.type)}),children:null===n||void 0===n?void 0:n.text})},E=n(21),I=function(e){var t=e.children,n=e.path,a=e.exact,c=e.restProps,s=U((function(e){return function(e){return Boolean(e.auth.currentUser)}(e)}));return Object(M.jsx)(M.Fragment,{children:s?Object(M.jsx)(h.b,Object(E.a)(Object(E.a)({},c),{},{path:n,exact:a,children:t})):null})},L=n(11),R=function(e){Object(N.a)(e);var t=Object(a.useRef)(null),n=Object(a.useState)(1),c=Object(L.a)(n,2),s=c[0],i=c[1],r=Object(a.useState)(0),o=Object(L.a)(r,2),l=o[0],u=o[1],d=Object(f.b)(),p=U((function(e){return function(e){return e.common.imageViewingUrl}(e)}));return Object(M.jsxs)("div",{className:w()("view-image",{"view-image--hidden":!p}),children:[p&&Object(M.jsx)("img",{className:"view-image__img",src:p,ref:t,style:{transform:"scale(".concat(s,") rotate(").concat(l,"deg)")}}),Object(M.jsxs)("ul",{className:"view-image__actions",children:[Object(M.jsx)("li",{className:"view-image__actions-item",children:Object(M.jsx)("button",{type:"button",className:"view-image__actions-btn",onClick:function(){i(s+.05)},children:Object(M.jsx)("span",{className:"view-image__icon view-image__actions-icon material-icons-outlined",children:"add"})})}),Object(M.jsx)("li",{className:"view-image__actions-item",children:Object(M.jsx)("button",{type:"button",className:"view-image__actions-btn",onClick:function(){i(s-.05)},children:Object(M.jsx)("span",{className:"view-image__icon view-image__actions-icon material-icons-outlined",children:"remove"})})}),Object(M.jsx)("li",{className:"view-image__actions-item",children:Object(M.jsx)("button",{type:"button",className:"view-image__actions-btn",onClick:function(){u(l+5)},children:Object(M.jsx)("span",{className:"view-image__icon view-image__actions-icon material-icons-outlined",children:"rotate_right"})})}),Object(M.jsx)("li",{className:"view-image__actions-item",children:Object(M.jsx)("button",{type:"button",className:"view-image__actions-btn",onClick:function(){u(l-5)},children:Object(M.jsx)("span",{className:"view-image__icon view-image__actions-icon material-icons-outlined",children:"rotate_left"})})}),Object(M.jsx)("li",{className:"view-image__actions-item",children:Object(M.jsx)("button",{type:"button",className:"view-image__actions-btn",onClick:function(){d(S.setImageViewingUrl(null))},children:Object(M.jsx)("span",{className:"view-image__icon view-image__actions-icon material-icons-outlined",children:"close"})})})]})]})},z=n(46),D=function(e){var t=e.isLoading,n=e.className,a=e.restProps,c=e.classes,s=e.children,i=e.type;return Object(M.jsx)("button",Object(E.a)(Object(E.a)({},null===a||void 0===a?void 0:a.root),{},{type:i||"button",className:w()("loading-button",null===c||void 0===c?void 0:c.root,n),disabled:t,children:t?Object(M.jsx)("div",Object(E.a)({className:w()("loading-button__spinner",null===c||void 0===c?void 0:c.spinner)},null===a||void 0===a?void 0:a.spinner)):s}))},T=n(41),H=function(e){Object(N.a)(e);var t=Object(a.useState)(!1),n=Object(L.a)(t,2),c=n[0],s=n[1],l=P(),u=Object(h.g)(),d=Object(h.h)(),p=Object(f.b)();Object(a.useEffect)((function(){_()||u.push("".concat(d.pathname,"?tab=login"))}),[]);var j=Object(z.a)({initialValues:{email:"",password:"",displayName:""},validate:function(e){var t={};return e.email.trim()||(t.email="Empty email"),e.password.trim()||(t.password="Empty password"),t},onSubmit:function(e){return Object(r.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s(!0),"register"!==m()){t.next=8;break}return t.next=5,Object(o.b)(b,e.email,e.password);case 5:p(S.openAlert({type:"success",text:"Signed up"})),t.next=12;break;case 8:if("login"!==m()){t.next=12;break}return t.next=11,Object(o.e)(b,e.email,e.password);case 11:p(S.openAlert({type:"success",text:"Signed in"}));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),"login"===m()?p(S.openAlert({type:"error",text:"Cannot login"})):p(S.openAlert({type:"error",text:"Cannot register"}));case 17:return t.prev=17,s(!1),j.resetForm(),t.finish(17);case 21:case"end":return t.stop()}}),t,null,[[0,14,17,21]])})))()}}),m=function(){return l.get("tab")},_=function(){return!("login"!==m()&&"register"!==m()&&!m())};return Object(M.jsxs)("form",{className:"auth-form",onSubmit:j.handleSubmit,children:[Object(M.jsxs)("h1",{className:"auth-form__title",children:["login"===m()&&"Login","register"===m()&&"Register"]}),Object(M.jsxs)("div",{className:"auth-form__input-group",children:[Object(M.jsx)("div",{className:"auth-form__icon-wrapper",children:Object(M.jsx)("span",{className:"auth-form__icon material-icons-outlined",children:"email"})}),Object(M.jsx)("input",Object(E.a)({type:"text",className:w()("auth-form__input",{"auth-form__input--error":j.touched.email&&j.errors.email}),placeholder:"Email"},j.getFieldProps("email")))]}),Object(M.jsxs)("div",{className:"auth-form__input-group",children:[Object(M.jsx)("div",{className:"auth-form__icon-wrapper",children:Object(M.jsx)("span",{className:"auth-form__icon material-icons-outlined",children:"lock"})}),Object(M.jsx)("input",Object(E.a)({type:"password",className:w()("auth-form__input",{"auth-form__input--error":j.touched.password&&j.errors.password}),placeholder:"Password"},j.getFieldProps("password")))]}),Object(M.jsxs)(D,{isLoading:c,classes:{root:"auth-form__submit-btn"},type:"submit",children:["login"===m()&&"Login","register"===m()&&"Register"]}),"register"===m()&&Object(M.jsx)(T.b,{to:"".concat(d.pathname,"?tab=login"),className:"auth-form__footer-link",children:"Already have an account? Login"}),"login"===m()&&Object(M.jsx)(T.b,{to:"".concat(d.pathname,"?tab=register"),className:"auth-form__footer-link",children:"Don't have an account? Sign Up"})]})},J=function(e){return Object(N.a)(e),Object(M.jsx)("div",{className:"auth-page",children:Object(M.jsx)(H,{})})},K=function(e){var t=e.children;return Object(M.jsx)("div",{className:"container",children:t})},Y=n.p+"static/media/logo.b23f6673.jpg",G=function(e){Object(N.a)(e);return Object(M.jsx)("header",{className:"header",children:Object(M.jsx)(K,{children:Object(M.jsxs)("div",{className:"header__body",children:[Object(M.jsx)("img",{className:"header__logo",src:Y}),Object(M.jsxs)("button",{className:"header__logout-btn",onClick:function(){Object(d.c)(b)},children:[Object(M.jsx)("span",{className:"header__logout-icon material-icons-outlined",children:"logout"}),Object(M.jsx)("span",{children:"Log out"})]})]})})})},Q=function(e){var t=e.children,n=e.classes;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:w()("layout",null===n||void 0===n?void 0:n.root),children:Object(M.jsx)(K,{children:t})}),Object(M.jsx)(G,{})]})},Z=n(31),q=n(17),W=Object(_.b)({name:"posts",initialState:[],reducers:{setPosts:function(e,t){var n=t.payload;e.splice(0,e.length),e.push.apply(e,Object(q.a)(n))},deletePost:function(e,t){var n=t.payload,a=e.findIndex((function(e){return e.id===n}));e.splice(a,1)},addPost:function(e,t){var n=t.payload;e.push(n)},makePostFavourite:function(e,t){var n=t.payload,a=e.find((function(e){return e.id===n}));a&&(a.isFavourite=!0)},removePostFavourite:function(e,t){var n=t.payload,a=e.find((function(e){return e.id===n}));a&&(a.isFavourite=!1)}}}),X=W.actions,$=W.reducer,ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,a=t<0?0:t,c=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,s)).toFixed(a))+" "+c[s]},te=function(e){var t=e.children,n=e.isHidden,c=e.className,s=e.onClose,i=Object(a.useRef)(null);return B(i,(function(){s(),console.log("outside")}),[!n]),Object(M.jsx)("div",{className:w()("popup-menu",{"popup-menu--hidden":n},c),ref:i,children:t})},ne=n(81),ae=function(e){var t=e.data,n=e.classes,c=Object(a.useState)(!0),s=Object(L.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)(!0),d=Object(L.a)(u,2),b=d[0],f=d[1],h=Object(a.useState)(!1),_=Object(L.a)(h,2),O=(_[0],_[1]),v=Object(a.useRef)(null),g=A(),N=(U((function(e){return x(e)})),function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,Object(Z.c)(Object(Z.d)(j,"posts",t.id));case 4:return e.next=6,Object(p.a)(Object(p.d)(m,t.image.path));case 6:g(X.deletePost(t.id)),g(S.openAlert({type:"success",text:"Deleted"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g(S.openAlert({type:"error",text:"Cannot delete"}));case 13:return e.prev=13,O(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(){return e.apply(this,arguments)}}()),y=function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Z.e)(Object(Z.d)(j,"posts",t.id),{isFavourite:!0});case 3:g(X.makePostFavourite(t.id)),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:return e.prev=8,e.finish(8);case 10:case"end":return e.stop()}}),e,null,[[0,6,8,10]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.e)(Object(Z.d)(j,"posts",t.id),{isFavourite:!1});case 2:g(X.removePostFavourite(t.id));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(r.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.image.url);case 2:return n=e.sent,e.next=5,n.blob();case 5:e.sent,v.current.click();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(M.jsxs)("div",{className:w()("post",null===n||void 0===n?void 0:n.root),title:t.desc,children:[Object(M.jsxs)("div",{className:"post__body",children:[Object(M.jsxs)("div",{className:"post__img-wrapper",children:[Object(M.jsx)("div",{className:w()("post__img-loader",{"post__img-loader--hidden":!b}),children:Object(M.jsx)("div",{className:"post__img-loader-spinner"})}),Object(M.jsx)("img",{src:t.image.url,alt:"Image",className:w()("post__img",{"post__img--hidden":b}),onLoad:function(){f(!1)}}),Object(M.jsx)("button",{type:"button",className:"post__view-img-btn",onClick:function(){g(S.setImageViewingUrl(t.image.url))},children:Object(M.jsx)("span",{className:"post__icon post__see-icon material-icons-outlined",children:"visibility"})})]}),Object(M.jsxs)("div",{className:"post__info",children:[Object(M.jsx)("p",{className:"post__desc",children:t.desc}),Object(M.jsxs)("div",{className:"post__meta-data",children:[ee(t.image.size),Object(M.jsx)("span",{className:"post__dot"}),function(){var e=new Date(Date.parse(t.image.createdAt));return"".concat(e.getFullYear(),"-").concat(e.getMonth(),"-").concat(e.getDate())}()]})]})]}),Object(M.jsxs)("div",{className:"post__actions",children:[Object(M.jsx)(ne.a.button,{type:"button",className:"post__actions-btn post__download-btn post__download-img-btn",onClick:C,whileTap:{scale:.9},children:Object(M.jsx)("span",{className:"post__icon material-icons-outlined",children:"download"})}),t.isFavourite?Object(M.jsx)(ne.a.button,{className:"post__actions-btn post__actions-remove-favourite-btn",onClick:k,whileTap:{scale:.9},children:Object(M.jsx)("span",{className:"post__icon post__heart-icon post__heart-filled-icon material-icons-outlined",children:"favorite"})}):Object(M.jsx)(ne.a.button,{className:"post__actions-btn",onClick:y,whileTap:{scale:.9},children:Object(M.jsx)("span",{className:"post__icon post__heart-icon post__heart-unfilled-icon material-icons-outlined",children:"favorite_border"})}),Object(M.jsx)(ne.a.button,{className:"post__actions-btn post__actions-delete-btn",onClick:N,whileTap:{scale:.9},children:Object(M.jsx)("span",{className:"post__icon material-icons-outlined",children:"delete"})}),Object(M.jsx)(ne.a.button,{className:w()("post__actions-btn post__actions-open-menu-btn","post__actions-open-menu-btn--hidden"),onClick:function(){l(!1)},whileTap:{scale:.9},children:Object(M.jsx)("span",{className:"post__icon post__more-icon material-icons-outlined",children:"more_vert"})})]}),Object(M.jsx)(te,{isHidden:o,onClose:function(){return l(!0)},className:"post__popup-menu",children:Object(M.jsxs)("ul",{className:"post__popup-menu-btns",children:[Object(M.jsx)("li",{className:"post__popup-menu-btns-item",children:Object(M.jsxs)("button",{className:"post__popup-menu-btn",onClick:N,children:[Object(M.jsx)("span",{className:"post__icon post__popup-menu-icon material-icons-outlined",children:"delete"}),"Delete"]})}),t.isFavourite?Object(M.jsx)("li",{className:"post__popup-menu-btns-item",children:Object(M.jsxs)("button",{className:"post__popup-menu-btn",onClick:k,children:[Object(M.jsx)("span",{className:"post__icon post__popup-menu-icon material-icons-outlined",children:"favorite_border"}),"Remove from favourite"]})}):Object(M.jsx)("li",{className:"post__popup-menu-btns-item",children:Object(M.jsxs)("button",{className:"post__popup-menu-btn",onClick:y,children:[Object(M.jsx)("span",{className:"post__icon post__popup-menu-icon material-icons-outlined",children:"favorite_border"}),"Move to favourite"]})})]})}),Object(M.jsx)("a",{ref:v,download:!0,hidden:!0,children:"download"})]})},ce=function(e){Object(N.a)(e);var t=Object(a.useState)(""),n=Object(L.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)(!1),u=Object(L.a)(o,2),d=u[0],p=u[1],b=Object(a.useState)(!0),m=Object(L.a)(b,2),f=m[0],_=m[1],O=Object(h.g)(),v=Object(h.h)(),g=P(),y=A(),w=U((function(e){return x(e)})),k=U((function(e){return function(e){return e.posts}(e)}));Object(a.useEffect)((function(){C(),F()}),[]);var C=function(){var e=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,Object(l.e)(Object(l.g)(Object(l.b)(j,"posts"),Object(l.i)("authorUid","==",w.uid)));case 4:t=e.sent,n=[],t.forEach((function(e){var t=e.data();n.push(Object(E.a)({id:e.id},t))})),y(X.setPosts(n)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),y(S.openAlert({type:"error",text:"Cannot load"}));case 13:return e.prev=13,p(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){return g.get("filter")},V=function(){var e=[];switch(e=k.filter((function(e){if(e.desc.includes(c))return!0})),B()){case"all":default:e=e;break;case"favourite":e=e.filter((function(e){return 1==e.isFavourite}));break;case"not-favourite":e=e.filter((function(e){return 0==e.isFavourite}))}return e};return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(Q,{classes:{root:"profile-page"},children:[Object(M.jsxs)("div",{className:"profile-page__top-bar",children:[Object(M.jsxs)("form",{className:"profile-page__search-input-wrapper",action:"#",children:[Object(M.jsx)("span",{className:"profile-page__icon profile-page__search-icon material-icons-outlined",children:"search"}),Object(M.jsx)("input",{type:"text",className:"profile-page__search-input",placeholder:"Search...",size:1,value:c,onChange:function(e){return s(e.target.value)}})]}),Object(M.jsxs)("div",{className:"profile-page__filter-btn-wrapper",children:[Object(M.jsxs)("button",{type:"button",className:"profile-page__filter-btn",onClick:function(){_(!f)},children:[Object(M.jsx)("span",{className:"profile-page__icon material-icons-outlined",children:"sort"}),{all:"All",favourite:"Favourite","not-favourite":"Not Favourite"}[B()||"all"]]}),Object(M.jsx)(te,{className:"profile-page__filter-menu",isHidden:f,onClose:function(){return _(!0)},children:Object(M.jsxs)("ul",{className:"profile-page__filter-menu-btns",children:[Object(M.jsx)("li",{className:"profile-page__filter-menu-btns-item",children:Object(M.jsx)("button",{type:"button",className:"profile-page__filter-menu-btn",onClick:function(){O.push("".concat(v.pathname,"?filter=all")),_(!0)},children:"All"})}),Object(M.jsx)("li",{className:"profile-page__filter-menu-btns-item",children:Object(M.jsx)("button",{type:"button",className:"profile-page__filter-menu-btn",onClick:function(){O.push("".concat(v.pathname,"?filter=favourite")),_(!0)},children:"Favourite"})}),Object(M.jsx)("li",{className:"profile-page__filter-menu-btns-item",children:Object(M.jsx)("button",{type:"button",className:"profile-page__filter-menu-btn",onClick:function(){O.push("".concat(v.pathname,"?filter=not-favourite")),_(!0)},children:"Not favorute"})})]})})]}),Object(M.jsxs)("button",{className:"profile-page__add-post-btn",onClick:function(){y(S.setCurrentVisibleModal("add-post"))},children:[Object(M.jsx)("span",{className:"profile-page__icon material-icons-outlined",children:"add"}),"New"]})]}),Object(M.jsx)("div",{className:"profile-page__posts",children:V().map((function(e){return Object(M.jsx)(ae,{data:e,classes:{root:"profile-page__post"}},e.id)}))}),!d&&0===V().length&&Object(M.jsx)("h3",{className:"profile-page__no-posts-title",children:"No posts"}),d?Object(M.jsx)("div",{className:"profile-page__loader"}):Object(M.jsx)(ne.a.button,{type:"button",className:"profile-page__reload-btn",onClick:function(){C()},whileTap:{scale:.9},children:Object(M.jsx)("span",{className:"profile-page__icon profile-page__reload-icon material-icons-outlined",children:"refresh"})})]})})},se=function(e){return Object(N.a)(e),Object(M.jsx)(Q,{children:"Users Page"})},ie=function(e){var t=e.className,n=e.children,c=e.isHidden,s=e.title,i=e.onClose,r=Object(a.useRef)(null);B(r,(function(){i()}),[!c]);return Object(M.jsx)("div",{className:w()("modal",{"modal--hidden":c}),children:Object(M.jsxs)("div",{className:w()("modal__wrapper",t),ref:r,children:[Object(M.jsxs)("div",{className:"modal__header",children:[Object(M.jsx)("h2",{className:"modal__title",children:s}),Object(M.jsx)("button",{className:"modal__close-btn",onClick:function(){i()},children:Object(M.jsx)("span",{className:"modal__icon modal__close-icon material-icons-outlined",children:"close"})})]}),Object(M.jsx)("div",{className:"modal__body",children:n})]})})},re=function(e){Object(N.a)(e);var t=Object(a.useState)(null),n=Object(L.a)(t,2),c=n[0],s=n[1],o=A(),l=Object(a.useRef)(null),u="add-post"!==U((function(e){return C(e)})),d=U((function(e){return x(e)})),b=Object(z.a)({initialValues:{desc:""},validate:function(e){var t={};return e.desc.trim()||(t.desc="empty desc"),c||(t.image="empty image"),t},onSubmit:function(e){return Object(r.a)(i.a.mark((function t(){var n,a,s,r,l,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="images/".concat(Object(_.c)(),"_").concat(c.name),a=Object(p.d)(m,n),t.next=5,Object(p.e)(a,c);case 5:return s=t.sent,t.next=8,Object(p.b)(a);case 8:return r=t.sent,l={authorUid:d.uid,image:{url:r,size:s.metadata.size,path:n,createdAt:s.metadata.timeCreated},likesCount:0,desc:e.desc,isFavourite:!1},t.next=12,Object(Z.a)(Object(Z.b)(j,"posts"),l);case 12:u=t.sent,o(X.addPost({id:u.id,authorUid:d.uid,desc:e.desc,likesCount:0,image:{url:r,size:s.metadata.size,path:n,createdAt:s.metadata.timeCreated},isFavourite:!1})),o(S.openAlert({type:"success",text:"Image created"})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),o(S.openAlert({type:"error",text:"Cannot create image"}));case 20:return t.prev=20,b.resetForm(),f(),t.finish(20);case 24:case"end":return t.stop()}}),t,null,[[0,17,20,24]])})))()}}),f=function(){s(null),l.current.value=""};return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(ie,{isHidden:u,title:"Add image",className:"add-post-modal__modal",onClose:function(){o(S.setCurrentVisibleModal(null)),b.resetForm(),f()},children:[Object(M.jsxs)("form",{className:"add-post-modal__form",onSubmit:b.handleSubmit,children:[Object(M.jsx)("input",Object(E.a)({type:"text",className:w()("add-post-modal__desc-input",{"add-post-modal__desc-input--error":b.touched.desc&&b.errors.desc}),placeholder:"Image description"},b.getFieldProps("desc"))),c?Object(M.jsxs)("div",{className:"add-post-modal__selected-image-wrapper",children:[Object(M.jsx)("img",{src:URL.createObjectURL(c),className:"add-post-modal__selected-image"}),Object(M.jsx)("button",{type:"button",className:"add-post-modal__remove-selected-image-btn",onClick:function(){f()},children:"Remove"})]}):Object(M.jsxs)("button",{type:"button",className:"add-post-modal__upload-image-btn",onClick:function(){l.current.click()},children:[Object(M.jsx)("span",{className:"add-post-modal__icon material-icons-outlined",children:"perm_media"}),"Upload"]}),Object(M.jsx)(D,{isLoading:b.isSubmitting,classes:{root:"add-post-modal__submit-btn"},type:"submit",children:"Submit"})]}),Object(M.jsx)("input",{type:"file",ref:l,onChange:function(e){var t=e.target.files;s(t?t[0]:null)},hidden:!0})]})})},oe=function(e){Object(N.a)(e);var t=Object(z.a)({initialValues:{name:""},validate:function(e){var t={};return e.name.trim()||(t.name="Empty name"),t},onSubmit:function(e){return Object(r.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={name:e.name},t.next=4,Object(Z.a)(Object(Z.b)(j,"categories"),a);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),n(S.openAlert({type:"error",text:"Cannot create category"}));case 9:return t.prev=9,n(S.openAlert({type:"success",text:"Created category"})),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})))()}}),n=A(),a="add-category"!==U((function(e){return C(e)}));return Object(M.jsx)(ie,{title:"Add Category",className:"add-category-modal",isHidden:a,onClose:function(){n(S.setCurrentVisibleModal(null))},children:Object(M.jsxs)("form",{onSubmit:t.handleSubmit,className:"add-category-modal__form",children:[Object(M.jsx)("input",Object(E.a)({type:"text",className:w()("add-category-modal__name-input",{"add-category-modal__name-input--error":t.touched.name&&t.errors.name}),placeholder:"Category name"},t.getFieldProps("name"))),Object(M.jsx)(D,{isLoading:t.isSubmitting,className:"add-category-modal__submit-btn",type:"submit",children:"Create"})]})})},le=function(e){var t=Object(f.b)(),n=Object(h.g)();return Object(a.useEffect)((function(){Object(o.d)(b,function(){var e=Object(r.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a?(t(v.login(a.providerData[0])),n.push("/profile")):(t(v.logout()),n.push("/auth?tab=login"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:"app",children:Object(M.jsxs)(h.d,{children:[Object(M.jsx)(h.b,{path:"/",exact:!0,children:Object(M.jsx)(h.a,{to:"/profile"})}),Object(M.jsx)(h.b,{path:"/auth",exact:!0,children:Object(M.jsx)(J,{})}),Object(M.jsx)(I,{path:"/profile",exact:!0,children:Object(M.jsx)(ce,{})}),Object(M.jsx)(I,{path:"/users",exact:!0,children:Object(M.jsx)(se,{})})]})}),Object(M.jsx)(R,{}),Object(M.jsx)(V,{}),Object(M.jsx)(re,{}),Object(M.jsx)(oe,{})]})},ue=Object(_.b)({name:"categories",initialState:{selectedId:null,list:[]},reducers:{}}),de=(ue.actions,ue.reducer),pe=Object(_.a)({reducer:{auth:g,common:F,posts:$,categories:de}});Object(c.render)(Object(M.jsx)(a.StrictMode,{children:Object(M.jsx)(T.a,{basename:"/image-gallery",children:Object(M.jsx)(f.a,{store:pe,children:Object(M.jsx)(le,{})})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.bac66e22.chunk.js.map